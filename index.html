<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voyage to Learning 4.0 - Session Registration</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #0f2942;
            --ocean: #1e4d7b;
            --sky: #5b9bd5;
            --sand: #f7e7ce;
            --gold: #d4a574;
            --white: #ffffff;
            --light-gray: #f5f7fa;
            --text: #2c3e50;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: linear-gradient(135deg, var(--sand) 0%, var(--light-gray) 100%);
            color: var(--text);
            line-height: 1.6;
        }

        /* Header with Banner */
        .header {
            background: linear-gradient(135deg, var(--navy) 0%, var(--ocean) 100%);
            color: white;
            padding: 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .banner-image {
            width: 100%;
            position: relative;
        }

        .banner-image img {
            display: block;
            width: 100%;
            height: auto;
            max-height: 350px;
            object-fit: cover;
            object-position: center;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: wave 15s infinite linear;
        }

        @keyframes wave {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .banner-logo {
            position: relative;
            z-index: 2;
            background: linear-gradient(135deg, var(--navy) 0%, var(--ocean) 100%);
            padding: 1.5rem 1rem;
        }

        .banner-logo h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }

        .banner-logo .subtitle {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--gold);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .banner-logo .ship-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Info Card */
        .info-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--ocean);
        }

        .info-card h2 {
            font-family: 'Playfair Display', serif;
            color: var(--navy);
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        /* User Form */
        .user-form {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--navy);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--ocean);
        }

        /* Register for Day Button */
        .register-day-btn {
            background: linear-gradient(135deg, var(--navy) 0%, var(--ocean) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        .register-day-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 77, 123, 0.4);
        }

        .register-day-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .register-day-btn.registered {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .registration-status {
            margin-top: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
        }

        .registration-status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .registration-status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Filters */
        .filters {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group.search-group {
            flex: 2;
            min-width: 300px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--navy);
        }

        .filter-group select,
        .filter-group input[type="text"] {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            background: white;
        }

        .filter-group input[type="text"] {
            cursor: text;
        }

        .filter-group input[type="text"]:focus {
            outline: none;
            border-color: var(--ocean);
        }

        /* Schedule Header with Print Button */
        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .schedule-header h2 {
            margin: 0;
        }

        .print-btn {
            background: var(--navy);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }

        .print-btn:hover {
            background: var(--ocean);
            transform: scale(1.02);
        }

        /* Filling Fast Badge */
        .filling-fast-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            animation: pulse 2s infinite;
            z-index: 10;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* No Results Message */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: #666;
            font-size: 1.2rem;
        }

        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            #printableSchedule, #printableSchedule * {
                visibility: visible;
            }
            #printableSchedule {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        }

        /* Filter Actions Row */
        .filter-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .favorites-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            background: white;
            padding: 0.6rem 1rem;
            border-radius: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            user-select: none;
        }

        .favorites-toggle:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .favorites-toggle input {
            display: none;
        }

        .favorites-toggle input:checked + .toggle-label {
            color: var(--gold);
            font-weight: 700;
        }

        .favorites-toggle input:checked ~ .toggle-label::before {
            content: '‚úì ';
        }

        .toggle-label {
            font-weight: 600;
            color: var(--navy);
        }

        .favorites-count {
            color: #666;
            font-size: 0.9rem;
        }

        /* Favorite Button on Cards */
        .favorite-btn {
            position: absolute;
            top: 45px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.4;
            transition: all 0.2s;
            z-index: 5;
        }

        .favorite-btn:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .favorite-btn.favorited {
            opacity: 1;
        }

        /* Mobile Sticky Schedule Bar */
        .mobile-schedule-bar {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--navy);
            color: white;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
            border-radius: 20px 20px 0 0;
        }

        .mobile-schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
        }

        .mobile-schedule-count {
            background: var(--gold);
            color: var(--navy);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 700;
        }

        .mobile-schedule-arrow {
            transition: transform 0.3s;
        }

        .mobile-schedule-bar.collapsed .mobile-schedule-arrow {
            transform: rotate(180deg);
        }

        .mobile-schedule-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 0 1rem 1rem 1rem;
            transition: max-height 0.3s ease;
        }

        .mobile-schedule-bar.collapsed .mobile-schedule-content {
            max-height: 0;
            padding: 0 1rem;
            overflow: hidden;
        }

        .mobile-schedule-item {
            background: rgba(255,255,255,0.1);
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .mobile-schedule-item:last-child {
            margin-bottom: 0;
        }

        .mobile-schedule-slot {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: 0.25rem;
        }

        .mobile-schedule-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .mobile-schedule-empty {
            text-align: center;
            opacity: 0.7;
            padding: 1rem;
        }

        /* Show mobile bar only on smaller screens */
        @media (max-width: 768px) {
            .mobile-schedule-bar {
                display: block;
            }
            
            /* Add padding to bottom of page so content isn't hidden behind sticky bar */
            body {
                padding-bottom: 80px;
            }
            
            /* Hide the regular My Schedule section on mobile since we have the sticky bar */
            .my-schedule {
                display: none !important;
            }
        }

        /* Sessions Grid */
        .sessions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        /* Session Card */
        .session-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 4px solid var(--ocean);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 380px;
        }

        .session-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--ocean), var(--sky));
        }

        .session-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .session-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .session-slot {
            background: var(--ocean);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .category-badge {
            color: var(--navy);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 0.5rem;
            display: inline-block;
            background: var(--sand);
        }

        /* Category-specific colors */
        .category-badge.technology { background: #7BA7D7; }
        .category-badge.sel { background: #D8A7D8; }
        .category-badge.wellness { background: #90EE90; }
        .category-badge.safety { background: #FFEB7F; }
        .category-badge.instruction { background: #FFCBA4; }

        .session-card h3 {
            font-family: 'Playfair Display', serif;
            color: var(--navy);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .presenter {
            color: var(--ocean);
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .description {
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
            line-height: 1.6;
            flex-grow: 1;
        }

        .description-text {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .description-text.expanded {
            -webkit-line-clamp: unset;
            display: block;
        }

        .read-more-btn {
            background: none;
            border: none;
            color: var(--ocean);
            font-weight: 600;
            cursor: pointer;
            padding: 0.25rem 0;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .read-more-btn:hover {
            text-decoration: underline;
        }

        .session-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        .capacity-low {
            color: #e67e22;
            font-weight: 600;
        }

        .capacity-full {
            color: #c0392b;
            font-weight: 600;
        }

        .register-btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(135deg, var(--ocean) 0%, var(--sky) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .register-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(30, 77, 123, 0.4);
        }

        .register-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .registered {
            background: var(--gold);
        }

        .session-full {
            background: #c0392b;
            color: white;
        }

        .switch-session {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .switch-session:hover {
            background: linear-gradient(135deg, #2980b9, #1f6dad);
        }

        /* My Schedule */
        .my-schedule {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .my-schedule h2 {
            font-family: 'Playfair Display', serif;
            color: var(--navy);
            margin-bottom: 1.5rem;
            font-size: 2rem;
        }

        .schedule-item {
            padding: 1rem;
            border-left: 4px solid var(--ocean);
            margin-bottom: 1rem;
            background: var(--light-gray);
            border-radius: 8px;
        }

        .schedule-slot {
            font-weight: 700;
            color: var(--ocean);
            margin-bottom: 0.5rem;
        }

        .schedule-title {
            font-weight: 600;
            color: var(--navy);
        }

        .schedule-presenter {
            color: #666;
            font-size: 0.9rem;
        }

        .schedule-room {
            color: #888;
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 3rem;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--ocean);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Alert */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .banner-logo .subtitle {
                font-size: 1.1rem;
            }

            .sessions-grid {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
            }
        }

        /* Setup Instructions */
        .setup-banner {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .setup-banner h3 {
            color: #856404;
            font-family: 'Playfair Display', serif;
            margin-bottom: 1rem;
        }

        .setup-banner ol {
            color: #856404;
            margin-left: 1.5rem;
        }

        .setup-banner li {
            margin-bottom: 0.5rem;
        }

        .setup-banner code {
            background: rgba(0, 0, 0, 0.1);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="banner-image">
            <img src="voyage-banner.png" alt="Voyage to Learning 4.5" style="width: 100%; display: block;">
        </div>
        <div class="banner-logo">
            <p class="subtitle" style="margin-top: 1rem; font-size: 1.3rem;">Set Your Course ‚Ä¢ February 2026</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Setup Instructions (Remove after Airtable setup) -->
        <div class="setup-banner" id="setupBanner">
            <h3>üîß Setup Required: Connect to Airtable</h3>
            <ol>
                <li>Create a free Airtable account at <a href="https://airtable.com" target="_blank">airtable.com</a></li>
                <li>Create a new base called "Voyage to Learning"</li>
                <li>Create a table called "Registrations" with these fields:
                    <ul>
                        <li><strong>Name</strong> (Single line text)</li>
                        <li><strong>Email</strong> (Email)</li>
                        <li><strong>School</strong> (Single line text)</li>
                        <li><strong>Session1</strong> (Single line text)</li>
                        <li><strong>Session2</strong> (Single line text)</li>
                        <li><strong>Session3</strong> (Single line text)</li>
                        <li><strong>Session4</strong> (Single line text)</li>
                        <li><strong>RegisteredAt</strong> (Date & time)</li>
                    </ul>
                </li>
                <li>Go to Help ‚Üí API Documentation and copy your:
                    <ul>
                        <li>Personal Access Token (create in account settings)</li>
                        <li>Base ID (from URL: <code>app...</code>)</li>
                        <li>Table ID or name</li>
                    </ul>
                </li>
                <li>Replace the config values at the bottom of this HTML file (search for "AIRTABLE_CONFIG")</li>
            </ol>
            <p><strong>Note:</strong> This banner will disappear once Airtable is connected!</p>
        </div>

        <!-- User Information Form -->
        <div class="user-form">
            <h2 style="font-family: 'Playfair Display', serif; color: var(--navy); margin-bottom: 1rem;">Your Information</h2>
            <div class="form-group">
                <label for="userName">Full Name *</label>
                <input type="text" id="userName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label for="userEmail">Email Address *</label>
                <input type="email" id="userEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label for="userSchool">School/Department *</label>
                <select id="userSchool" required>
                    <option value="">-- Select your school/department --</option>
                    <option value="OCES">Oglethorpe County Elementary School (OCES)</option>
                    <option value="OCMS">Oglethorpe County Middle School (OCMS)</option>
                    <option value="OCHS">Oglethorpe County High School (OCHS)</option>
                    <option value="Academy">Academy</option>
                    <option value="Central Office">Central Office</option>
                    <option value="Technology">Technology</option>
                    <option value="Transportation">Transportation</option>
                    <option value="Nutrition Services">Nutrition Services</option>
                    <option value="Nurses">Nurses</option>
                    <option value="Maintenance and Facilities">Maintenance and Facilities</option>
                    <option value="Board of Education">Board of Education</option>
                    <option value="External Guest">External Guest</option>
                </select>
            </div>
            <div class="form-group" style="margin-top: 1rem;">
                <button type="button" id="registerDayBtn" class="register-day-btn" onclick="registerForDay()">
                    üö¢ Register for the Day
                </button>
                <div id="registrationStatus" class="registration-status" style="display: none;"></div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group search-group">
                <label for="searchInput">üîç Search Sessions</label>
                <input type="text" id="searchInput" placeholder="Search by title, presenter, or keyword...">
            </div>
            <div class="filter-group">
                <label for="sessionFilter">Session Time</label>
                <select id="sessionFilter">
                    <option value="">All Sessions</option>
                    <option value="1">Session 1 (8:15-9:05)</option>
                    <option value="2">Session 2 (9:20-10:10)</option>
                    <option value="3">Session 3 (10:35-11:25)</option>
                    <option value="4">Session 4 (11:40-12:30)</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="categoryFilter">Category</label>
                <select id="categoryFilter">
                    <option value="">All Categories</option>
                    <option value="Technology">Technology</option>
                    <option value="Instruction">Instruction</option>
                    <option value="SEL">SEL</option>
                    <option value="Wellness">Wellness</option>
                    <option value="Safety">Safety</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="presenterFilter">Presenter</label>
                <select id="presenterFilter">
                    <option value="">All Presenters</option>
                </select>
            </div>
        </div>

        <!-- Filter Actions Row -->
        <div class="filter-actions">
            <label class="favorites-toggle">
                <input type="checkbox" id="showFavoritesOnly">
                <span class="toggle-label">‚≠ê Show Favorites Only</span>
            </label>
            <span class="favorites-count" id="favoritesCount"></span>
        </div>

        <!-- Alert Area -->
        <div id="alertArea"></div>

        <!-- My Schedule -->
        <div class="my-schedule" id="mySchedule" style="display: none;">
            <div class="schedule-header">
                <h2>üìã My Schedule</h2>
                <button class="print-btn" onclick="printSchedule()">üñ®Ô∏è Print My Schedule</button>
            </div>
            <div id="scheduleContent"></div>
        </div>

        <!-- Sessions Grid -->
        <div class="sessions-grid" id="sessionsGrid">
            <div class="loading">
                <div class="spinner"></div>
                <p>Loading sessions...</p>
            </div>
        </div>
    </div>

    <!-- Mobile Sticky Schedule Bar -->
    <div class="mobile-schedule-bar" id="mobileScheduleBar">
        <div class="mobile-schedule-header" onclick="toggleMobileSchedule()">
            <span>üìã My Schedule</span>
            <span class="mobile-schedule-count" id="mobileScheduleCount">0/4</span>
            <span class="mobile-schedule-arrow" id="mobileScheduleArrow">‚ñ≤</span>
        </div>
        <div class="mobile-schedule-content" id="mobileScheduleContent">
            <!-- Filled by JavaScript -->
        </div>
    </div>

    <script>
        // ============================================
        // AIRTABLE CONFIGURATION - REPLACE THESE VALUES
        // ============================================
        const AIRTABLE_CONFIG = {
            apiKey: 'pat4JfPWUNgr4NQxL.342aa5b23a4784cc789d0a9729b0c52cae067201249a0188661ced3b247571a7',
            baseId: 'appGVgzw2GnMh3gii',
            tableName: 'Registrations'
        };

const SESSIONS = [
    {
        "id": 1,
        "presenter": "Amy Godfrey, NEGaRESA ELA Specialist",
        "title": "Write On: Elevating Writing Instruction in Grades 3-5",
        "description": "Strong writing instruction is intentionally designed, modeled, and nurtured. In this session, educators will explore practical, research-based strategies to strengthen writing instruction across all subject areas. Participants will examine the key components of effective writing instruction beginning with sentence construction, moving to effective paragraph planning, and then putting all the pieces together to construct text based upon a scenario. Aligned to the new writing standards and GMAS expectations, this session emphasizes how to support all writers as they develop their abilities to construct text. You will leave with clear strategies to elevate student writing and grow confident, capable communicators.",
        "category": "Instruction",
        "session": "1",
        "capacity": 15,
        "room": "724"
    },
    {
        "id": 2,
        "presenter": "Amy Godfrey, NEGaRESA ELA Specialist",
        "title": "Write On: Elevating Writing Instruction in Grades 3-5",
        "description": "Strong writing instruction is intentionally designed, modeled, and nurtured. In this session, educators will explore practical, research-based strategies to strengthen writing instruction across all subject areas. Participants will examine the key components of effective writing instruction beginning with sentence construction, moving to effective paragraph planning, and then putting all the pieces together to construct text based upon a scenario. Aligned to the new writing standards and GMAS expectations, this session emphasizes how to support all writers as they develop their abilities to construct text. You will leave with clear strategies to elevate student writing and grow confident, capable communicators.",
        "category": "Instruction",
        "session": "2",
        "capacity": 15,
        "room": "724"
    },
    {
        "id": 3,
        "presenter": "Amy Godfrey, NEGaRESA ELA Specialist",
        "title": "Write On: Elevating Writing Instruction in Grades K-2",
        "description": "Strong writing instruction is intentionally designed, modeled, and nurtured. In this session, educators will explore practical, research-based strategies to strengthen writing instruction across all subject areas. Participants will examine the key components of effective writing instruction at the sentence level with sentence construction, developing writers through oral language and early understanding of forming a sentence. Aligned to the new Georgia standards, this session emphasizes how to support all writers across content areas as they develop their abilities to construct text at the sentence level. You will leave with clear strategies to elevate student writing and grow confident, capable communicators.",
        "category": "Instruction",
        "session": "3",
        "capacity": 15,
        "room": "724"
    },
    {
        "id": 4,
        "presenter": "Amy Godfrey, NEGaRESA ELA Specialist",
        "title": "Write On: Elevating Writing Instruction in Grades K-2",
        "description": "Strong writing instruction is intentionally designed, modeled, and nurtured. In this session, educators will explore practical, research-based strategies to strengthen writing instruction across all subject areas. Participants will examine the key components of effective writing instruction at the sentence level with sentence construction, developing writers through oral language and early understanding of forming a sentence. Aligned to the new Georgia standards, this session emphasizes how to support all writers across content areas as they develop their abilities to construct text at the sentence level. You will leave with clear strategies to elevate student writing and grow confident, capable communicators.",
        "category": "Instruction",
        "session": "4",
        "capacity": 15,
        "room": "724"
    },
    {
        "id": 5,
        "presenter": "April Arendall, EdTech Specialist/Speaker/Innovator",
        "title": "Wayground",
        "description": "Discover how Wayground's versatile supplemental learning platform can revolutionize differentiation and accessibility in your classroom by leveraging AI-powered tools to automatically generate Georgia State standards-aligned assessments, create engaging gamified presentations with immediate student performance feedback, and develop reading passages with proper citations on any subject matter. You'll explore how Wayground seamlessly integrates with Georgia Standards of Excellence to provide high-quality vetted Instruction across core subjects while offering 25+ accessibility features\u2014including Read Aloud, Audio Responses, Translation, and Dyslexia Font\u2014that ensure UDL compliance and increase flexibility in Instruction presentation. Whether you're looking to support curriculum adoption with vetted math resources, integrate supplemental Instruction with your existing curriculum maps, or create multiple versions of activities with unique reading levels to meet diverse student needs, this session will show you how Wayground can streamline your instructional practice while enhancing student engagement and outcomes.",
        "category": "Technology",
        "session": "1",
        "capacity": 20,
        "room": "721"
    },
    {
        "id": 6,
        "presenter": "April Arendall, EdTech Specialist/Speaker/Innovator",
        "title": "Wayground",
        "description": "Discover how Wayground's versatile supplemental learning platform can revolutionize differentiation and accessibility in your classroom by leveraging AI-powered tools to automatically generate Georgia State standards-aligned assessments, create engaging gamified presentations with immediate student performance feedback, and develop reading passages with proper citations on any subject matter. You'll explore how Wayground seamlessly integrates with Georgia Standards of Excellence to provide high-quality vetted Instruction across core subjects while offering 25+ accessibility features\u2014including Read Aloud, Audio Responses, Translation, and Dyslexia Font\u2014that ensure UDL compliance and increase flexibility in Instruction presentation. Whether you're looking to support curriculum adoption with vetted math resources, integrate supplemental Instruction with your existing curriculum maps, or create multiple versions of activities with unique reading levels to meet diverse student needs, this session will show you how Wayground can streamline your instructional practice while enhancing student engagement and outcomes.",
        "category": "Technology",
        "session": "2",
        "capacity": 20,
        "room": "721"
    },
    {
        "id": 7,
        "presenter": "Brandi Paul, Corrie Mattox, Mary Kate Shealy, OCES",
        "title": "Adobe Express for Education",
        "description": "How to use Adobe Express for Education with Students",
        "category": "Technology",
        "session": "1",
        "capacity": 15,
        "room": "701"
    },
    {
        "id": 8,
        "presenter": "Brandon Adams, OCMS",
        "title": "Google Maps across Instruction (writing, cultures, science, math)",
        "description": "This session is about strategies for teachers across Instruction and grade levels to use Google Maps to help students to learn the standards in a unique and creative way. This visual format will be another tool to add to your list of strategies that will help all learners, especially the visual learners. From art to math, Ela to science and Social Studies, ag to Spanish, Kindergarten to Senior year all can get ideas to change things up in your classroom if you have not used Google Maps before.",
        "category": "Technology",
        "session": "4",
        "capacity": 15,
        "room": "620"
    },
    {
        "id": 9,
        "presenter": "Danielle Williams, LMSW, Medlink Patriot, SBHC",
        "title": "How to Support Students with Mental Health Issues",
        "description": "",
        "category": "SEL",
        "session": "1",
        "capacity": 20,
        "room": "media"
    },
    {
        "id": 10,
        "presenter": "Danielle Williams, LMSW, Medlink Patriot, SBHC",
        "title": "How to Support Students with Mental Health Issues",
        "description": "",
        "category": "SEL",
        "session": "2",
        "capacity": 20,
        "room": "media"
    },
    {
        "id": 11,
        "presenter": "Danielle Williams, LMSW, Medlink Patriot, SBHC",
        "title": "Protecting your Personal Mental Health",
        "description": "",
        "category": "SEL",
        "session": "3",
        "capacity": 20,
        "room": "media"
    },
    {
        "id": 12,
        "presenter": "Danielle Williams, LMSW, Medlink Patriot, SBHC",
        "title": "Protecting your Personal Mental Health",
        "description": "",
        "category": "SEL",
        "session": "4",
        "capacity": 20,
        "room": "media"
    },
    {
        "id": 13,
        "presenter": "Dr. Chad Galloway & Ashlee Lawhorn, OCES",
        "title": "Virtual Field Trips",
        "description": "",
        "category": "Instruction",
        "session": "4",
        "capacity": 15,
        "room": "601"
    },
    {
        "id": 14,
        "presenter": "Dr. DeShonda Wolfe, Certified Brisk AI Professional, OCHS",
        "title": "Brisk",
        "description": "Brisk is an AI-powered Chrome extension that simplifies teaching tasks. It helps educators instantly create lesson plans, quizzes, presentations, and student feedback using your favorite resources, like YouTube, Google Docs, and web articles.",
        "category": "Technology",
        "session": "3",
        "capacity": 15,
        "room": "721"
    },
    {
        "id": 15,
        "presenter": "Dr. DeShonda Wolfe, Certified Brisk AI Professional, OCHS",
        "title": "Brisk",
        "description": "Brisk is an AI-powered Chrome extension that simplifies teaching tasks. It helps educators instantly create lesson plans, quizzes, presentations, and student feedback using your favorite resources, like YouTube, Google Docs, and web articles.",
        "category": "Technology",
        "session": "4",
        "capacity": 15,
        "room": "721"
    },
    {
        "id": 16,
        "presenter": "Dr. Susan Winstead, Math Instructional Coach, OCES",
        "title": "Hands-On Statistics that Stick",
        "description": "This interactive professional learning session immerses teachers in hands-on statistical investigations aligned to elementary standards. Participants will explore data collection, representation, and analysis through concrete materials and real-world contexts while gaining practical strategies to implement immediately in their classrooms.",
        "category": "Instruction",
        "session": "1",
        "capacity": 15,
        "room": "614"
    },
    {
        "id": 17,
        "presenter": "Dr. Susan Winstead, Math Instructional Coach, OCES",
        "title": "Hands-On Statistics that Stick",
        "description": "This interactive professional learning session immerses teachers in hands-on statistical investigations aligned to elementary standards. Participants will explore data collection, representation, and analysis through concrete materials and real-world contexts while gaining practical strategies to implement immediately in their classrooms.",
        "category": "Instruction",
        "session": "4",
        "capacity": 15,
        "room": "614"
    },
    {
        "id": 18,
        "presenter": "Dr. Tess Vaughn, Orthopedic Clinical Specialist",
        "title": "Strengthen Your Core, Posture, Pressure and Presence",
        "description": "We all hear how important breath, meditation, and relaxation are, but who has the time and energy to lie down in a dark, quiet place with candles and aromatherapy for 30 minutes every day?!  Although it does sound a bit dreamy\u2026What if you could lower stress, anxiety, blood pressure, pulse rate, low back pain, headaches, neck tension, buttocks pain, and pelvic floor leaking and pressure just by breathing with the right muscles in the right pattern even when you\u2019re teaching class!! Join me as we learn to do just that, and I bet you\u2019ll leave the breakout session feeling less pain and more relaxed.",
        "category": "Wellness",
        "session": "1",
        "capacity": 25,
        "room": "gym"
    },
    {
        "id": 19,
        "presenter": "Dr. Tess Vaughn, Orthopedic Clinical Specialist",
        "title": "Strengthen Your Core, Posture, Pressure and Presence",
        "description": "We all hear how important breath, meditation, and relaxation are, but who has the time and energy to lie down in a dark, quiet place with candles and aromatherapy for 30 minutes every day?!  Although it does sound a bit dreamy\u2026What if you could lower stress, anxiety, blood pressure, pulse rate, low back pain, headaches, neck tension, buttocks pain, and pelvic floor leaking and pressure just by breathing with the right muscles in the right pattern even when you\u2019re teaching class!! Join me as we learn to do just that, and I bet you\u2019ll leave the breakout session feeling less pain and more relaxed.",
        "category": "Wellness",
        "session": "2",
        "capacity": 25,
        "room": "gym"
    },
    {
        "id": 20,
        "presenter": "Eric Curts, Nationally Known Technology Integration Specialist",
        "title": "Your AI Treasure Chest: Creating & Sharing Gemini Gems",
        "description": "Gems are reusable, custom prompts that save your best AI workflows for instant access, and they are a game-changer for educators! In this deep-dive session we'll start by using Google's pre-made Gems (like Brainstormer and Storybook Creator), then learn to create your own, with tips for effective prompting and uploading reference files. We'll also cover how to share your Gems with colleagues and how schools can build a shared, high-quality Gem repository for staff and students. To see their full potential, we will tour my \"EduGems\" website and demonstrate powerful, ready-to-use prompts for lesson hooks, rubric generation, DOK analysis, and even creating AI-powered classroom games.",
        "category": "Technology",
        "session": "1",
        "capacity": 35,
        "room": "caf\u00e9"
    },
    {
        "id": 21,
        "presenter": "Eric Curts, Nationally Known Technology Integration Specialist",
        "title": "Promptcraft? Building a Better AI Prompt",
        "description": "AI can have a powerful impact on teaching and learning, but the value of what you get out can often depend on the quality of what you put in. How can you craft better prompts to get the best results? In this session we will explore examples of excellent prompts, models for building better prompts, using a \"super prompt\" to create prompts, using the \"collaborative prompt\" technique, activities to practice prompting, and more.",
        "category": "Technology",
        "session": "2",
        "capacity": 35,
        "room": "caf\u00e9"
    },
    {
        "id": 22,
        "presenter": "Eric Curts, Nationally Known Technology Integration Specialist",
        "title": "Full Bleed: Finding Balance between technology and Lift",
        "description": "Technology is a wonderful tool, but it can also consume our lives. In this session we will explore Googley tools as well as other tech resources (for ourselves and our students) to help monitor and manage the time we spend using technology, as well as how we can use technology to increase mindfulness and promote better mental, emotional, and physical health.",
        "category": "Technology",
        "session": "3",
        "capacity": 35,
        "room": "caf\u00e9"
    },
    {
        "id": 23,
        "presenter": "Eric Curts, Nationally Known Technology Integration Specialist",
        "title": "Did a Robot Write This Report? Managing AI Cheating",
        "description": "Although AI can help support students in their learning and work, unfortunately it can also be misused for cheating purposes. In this session we will explore ways to address academic integrity concerns in the age of AI. This will include creating student AI guidelines, adjustments to make assignments more AI-resistant, tools to monitor the use of AI and see what work students have done themselves, and educating students on the proper use of AI.",
        "category": "Technology",
        "session": "4",
        "capacity": 35,
        "room": "caf\u00e9"
    },
    {
        "id": 24,
        "presenter": "Erin Serrian, OCMS",
        "title": "Beat the Stress Away",
        "description": "Have you ever wanted a chance to create music with a community but didn't believe you had the skills to complete the task? Have you ever felt like you needed to productively put your energy into something to lower your stress? If so, this is the class for you! Come join the bucket drumming brigade and learn how to play a musical tune with just two sticks and a 5- gallon bucket. No musical experience necessary, but health benefits might be found!\"",
        "category": "Wellness",
        "session": "3",
        "capacity": 22,
        "room": "401"
    },
    {
        "id": 25,
        "presenter": "Erin Serrian, OCMS",
        "title": "Beat the Stress Away",
        "description": "Have you ever wanted a chance to create music with a community but didn't believe you had the skills to complete the task? Have you ever felt like you needed to productively put your energy into something to lower your stress? If so, this is the class for you! Come join the bucket drumming brigade and learn how to play a musical tune with just two sticks and a 5- gallon bucket. No musical experience necessary, but health benefits might be found!\"",
        "category": "Wellness",
        "session": "4",
        "capacity": 22,
        "room": "401"
    },
    {
        "id": 26,
        "presenter": "Jamie Parker, Fitness Instructor",
        "title": "Core Balance and Stretch",
        "description": "A gentle workout designed for all levels. This workout will include standing abs and balance, ending with a nice long stretch. (For all levels, all standing, and no floor work).",
        "category": "Wellness",
        "session": "1",
        "capacity": 25,
        "room": "101"
    },
    {
        "id": 27,
        "presenter": "Jamie Parker, Fitness Instructor",
        "title": "Core Balance and Stretch",
        "description": "A gentle workout designed for all levels. This workout will include standing abs and balance, ending with a nice long stretch. (For all levels, all standing, and no floor work).",
        "category": "Wellness",
        "session": "2",
        "capacity": 25,
        "room": "101"
    },
    {
        "id": 28,
        "presenter": "Jamie Parker, Fitness Instructor",
        "title": "Core Balance and Stretch",
        "description": "A gentle workout designed for all levels. This workout will include standing abs and balance, ending with a nice long stretch. (For all levels, all standing, and no floor work).",
        "category": "Wellness",
        "session": "3",
        "capacity": 25,
        "room": "101"
    },
    {
        "id": 29,
        "presenter": "Jamie Parker, Fitness Instructor",
        "title": "Core Balance and Stretch",
        "description": "A gentle workout designed for all levels. This workout will include standing abs and balance, ending with a nice long stretch. (For all levels, all standing, and no floor work).",
        "category": "Wellness",
        "session": "4",
        "capacity": 25,
        "room": "101"
    },
    {
        "id": 30,
        "presenter": "Jason Byars, EdTech Specialist/Speaker/Innovator",
        "title": "The Safe Harbor Classroom: Navigating Trauma with Care and Connection",
        "description": "Educators will explore how to create a \u201csafe harbor\u201d classroom where students feel grounded, supported, and ready to learn. Participants will learn how trauma and stress shape student behavior, practice recognizing common regulation needs, and discover trauma-informed strategies that build safety, predictability, and strong teacher\u2013student connections. Through practical examples and classroom-ready tools, this session equips teachers to navigate challenging moments with compassion and to foster a learning environment where every student can thrive.",
        "category": "SEL",
        "session": "2",
        "capacity": 15,
        "room": "705"
    },
    {
        "id": 31,
        "presenter": "Jason Byars, EdTech Specialist/Speaker/Innovator",
        "title": "The Safe Harbor Classroom: Navigating Trauma with Care and Connection",
        "description": "Educators will explore how to create a \u201csafe harbor\u201d classroom where students feel grounded, supported, and ready to learn. Participants will learn how trauma and stress shape student behavior, practice recognizing common regulation needs, and discover trauma-informed strategies that build safety, predictability, and strong teacher\u2013student connections. Through practical examples and classroom-ready tools, this session equips teachers to navigate challenging moments with compassion and to foster a learning environment where every student can thrive.",
        "category": "SEL",
        "session": "3",
        "capacity": 15,
        "room": "705"
    },
    {
        "id": 32,
        "presenter": "Jason Byars, EdTech Specialist/Speaker/Innovator",
        "title": "The Safe Harbor Classroom: Navigating Trauma with Care and Connection",
        "description": "Educators will explore how to create a \u201csafe harbor\u201d classroom where students feel grounded, supported, and ready to learn. Participants will learn how trauma and stress shape student behavior, practice recognizing common regulation needs, and discover trauma-informed strategies that build safety, predictability, and strong teacher\u2013student connections. Through practical examples and classroom-ready tools, this session equips teachers to navigate challenging moments with compassion and to foster a learning environment where every student can thrive.",
        "category": "SEL",
        "session": "4",
        "capacity": 15,
        "room": "705"
    },
    {
        "id": 33,
        "presenter": "Jennifer Kimbel, OCHS and Lindsey Gregory, OCES",
        "title": "So, You're Finished, Now What?",
        "description": "We\u2019ve all seen it: that one student who finishes a 30-minute task in approximately 45 seconds and is now staring into your soul. Instead of panicking or handing out \"busy work\" that everyone hates, come learn how to channel that chaotic speed into something meaningful. This session provides a toolkit of independent tasks and brain-bending challenges designed to keep early finishers challenged and actively engaged in critical thinking tasks.",
        "category": "Instruction",
        "session": "1",
        "capacity": 15,
        "room": "712"
    },
    {
        "id": 34,
        "presenter": "Jennifer Yauck, OCHS Instructional Coach",
        "title": "Inspire",
        "description": "Come and learn more about the GA Inspire platform! In this session we will look at the social studies and science courses to find lessons to help your students in all grade levels! We will focus on multimodality lessons for English Learners and so much more! You will walk away with new lessons and activities!",
        "category": "Technology",
        "session": "1",
        "capacity": 15,
        "room": "620"
    },
    {
        "id": 35,
        "presenter": "Jennifer Yauck, OCHS Instructional Coach",
        "title": "Inspire",
        "description": "Come and learn more about the GA Inspire platform! In this session we will look at the social studies and science courses to find lessons to help your students in all grade levels! We will focus on multimodality lessons for English Learners and so much more! You will walk away with new lessons and activities!",
        "category": "Technology",
        "session": "2",
        "capacity": 15,
        "room": "620"
    },
    {
        "id": 36,
        "presenter": "Jessica Tipton, OCHS",
        "title": "Supporting Diverse Learners with Notebook LM",
        "description": "A practical overview of using Notebook LM\u2019s features to help special education students navigate content more independently.",
        "category": "Technology",
        "session": "2",
        "capacity": 15,
        "room": "612"
    },
    {
        "id": 37,
        "presenter": "Jessica Tipton, OCHS",
        "title": "Fall Smart Workshop",
        "description": "A short instructional training on how to react, roll, and land safely during accidental falls.",
        "category": "Safety",
        "session": "3",
        "capacity": 15,
        "room": "612"
    },
    {
        "id": 38,
        "presenter": "Jim Synan, Education Specialist in School Counseling & Behavior Specialist, Clarke County Schools",
        "title": "Behavior Strategies for the K-12 Classroom",
        "description": "In this session, we will review effective Tier 1 Classroom Management Strategies, examine how to verbally de-escalate a student, and also touch on how trauma can impact the brain of students",
        "category": "SEL",
        "session": "1",
        "capacity": 20,
        "room": "601"
    },
    {
        "id": 39,
        "presenter": "Jim Synan, Education Specialist in School Counseling & Behavior Specialist, Clarke County Schools",
        "title": "Behavior Strategies for the K-12 Classroom",
        "description": "In this session, we will review effective Tier 1 Classroom Management Strategies, examine how to verbally de-escalate a student, and also touch on how trauma can impact the brain of students",
        "category": "SEL",
        "session": "2",
        "capacity": 20,
        "room": "601"
    },
    {
        "id": 40,
        "presenter": "Jim Synan, Education Specialist in School Counseling & Behavior Specialist, Clarke County Schools",
        "title": "Behavior Strategies for the K-12 Classroom",
        "description": "In this session, we will review effective Tier 1 Classroom Management Strategies, examine how to verbally de-escalate a student, and also touch on how trauma can impact the brain of students",
        "category": "SEL",
        "session": "3",
        "capacity": 20,
        "room": "601"
    },
    {
        "id": 41,
        "presenter": "Karyn Gunter, Director of Special Education, OCSD",
        "title": "A Day in the Life of a SpED Student",
        "description": "Experience a school day through the eyes of a special education student in this powerful simulation-based session. Participants will rotate through scenarios reflecting common academic, social, sensory, and communication challenges, building empathy and deepening understanding of diverse learning needs. Through guided reflection, educators will connect these experiences to practical classroom strategies, IEP implementation, and inclusive practices. Leave with a renewed perspective on accessibility, student engagement, and creating truly supportive learning environments for all students.",
        "category": "SEL",
        "session": "1",
        "capacity": 25,
        "room": "726"
    },
    {
        "id": 42,
        "presenter": "Karyn Gunter, Director of Special Education, OCSD",
        "title": "A Day in the Life of a SpEd Student",
        "description": "Experience a school day through the eyes of a special education student in this powerful simulation-based session. Participants will rotate through scenarios reflecting common academic, social, sensory, and communication challenges, building empathy and deepening understanding of diverse learning needs. Through guided reflection, educators will connect these experiences to practical classroom strategies, IEP implementation, and inclusive practices. Leave with a renewed perspective on accessibility, student engagement, and creating truly supportive learning environments for all students.",
        "category": "SEL",
        "session": "2",
        "capacity": 25,
        "room": "726"
    },
    {
        "id": 43,
        "presenter": "Katherine Calkin, MPH, MCHES Health Educator, Piedmont Hospital",
        "title": "Tai Chi for Balance Improvement",
        "description": "Clinical studies show tai chi can improve strength, flexibility, balance & quality of sleep. This mind-body practice can increase feelings of relaxation and focus. We will warm up with gentle qigong exercises and will practice a simple Tai Chi for Health Institute form. Movements can be done standing or seated and can be adapted to your body. No experience necessary.",
        "category": "Wellness",
        "session": "1",
        "capacity": 20,
        "room": "410/weight"
    },
    {
        "id": 44,
        "presenter": "Katherine Calkin, MPH, MCHES Health Educator, Piedmont Hospital",
        "title": "Tai Chi for Balance Improvement",
        "description": "Clinical studies show tai chi can improve strength, flexibility, balance & quality of sleep. This mind-body practice can increase feelings of relaxation and focus. We will warm up with gentle qigong exercises and will practice a simple Tai Chi for Health Institute form. Movements can be done standing or seated and can be adapted to your body. No experience necessary.",
        "category": "Wellness",
        "session": "2",
        "capacity": 20,
        "room": "410/weight"
    },
    {
        "id": 45,
        "presenter": "Kelly Allgood and Penny Miller, Janet High, OCMS",
        "title": "Power Up Participation: 3 Digital Tools to Supercharge Student Thinking and Writing",
        "description": "In this session, participants will explore Curipod, ShortAnswer.com, and WeWrite\u2014three easy-to-use tools designed to increase student engagement and writing. Attendees will experience each tool from a student\u2019s perspective and learn practical strategies for using them. The session will focus on promoting active thinking, real-time participation, and meaningful writing without adding extra grading.",
        "category": "Technology",
        "session": "3",
        "capacity": 15,
        "room": "610"
    },
    {
        "id": 46,
        "presenter": "Ken Howard, Special Agent in Charge (GBI Gang Task Force) Katie Walker, Assistant Special Agent in Charge & Tonia Willis",
        "title": "Gang Culture and Our Children",
        "description": "\u201cGang affiliation is not something that students leave behind when they enter the school building. If a gang presence exists at school, it cannot be ignored. . . Gang-related issues should be addressed head-on or they will fester, harm school climate, and impede the learning environment\u201d (Georgia Department of Education). Kids are being recruited to join gangs now when they are in high school, middle school, and yes, even elementary school! Learn about active gangs in surrounding areas and how to identify them, as well as how gang involvement impacts kids in school and out of school.",
        "category": "Safety",
        "session": "1",
        "capacity": 15,
        "room": "720"
    },
    {
        "id": 47,
        "presenter": "Ken Howard, Special Agent in Charge (GBI Gang Task Force) Katie Walker, Assistant Special Agent in Charge & Tonia Willis",
        "title": "Gang Culture and Our Children",
        "description": "\u201cGang affiliation is not something that students leave behind when they enter the school building. If a gang presence exists at school, it cannot be ignored. . . Gang-related issues should be addressed head-on or they will fester, harm school climate, and impede the learning environment\u201d (Georgia Department of Education). Kids are being recruited to join gangs now when they are in high school, middle school, and yes, even elementary school! Learn about active gangs in surrounding areas and how to identify them, as well as how gang involvement impacts kids in school and out of school.",
        "category": "Safety",
        "session": "2",
        "capacity": 15,
        "room": "720"
    },
    {
        "id": 48,
        "presenter": "Ken Howard, Special Agent in Charge (GBI Gang Task Force) Katie Walker, Assistant Special Agent in Charge & Tonia Willis",
        "title": "Gang Culture and Our Children",
        "description": "\u201cGang affiliation is not something that students leave behind when they enter the school building. If a gang presence exists at school, it cannot be ignored. . . Gang-related issues should be addressed head-on or they will fester, harm school climate, and impede the learning environment\u201d (Georgia Department of Education). Kids are being recruited to join gangs now when they are in high school, middle school, and yes, even elementary school! Learn about active gangs in surrounding areas and how to identify them, as well as how gang involvement impacts kids in school and out of school.",
        "category": "Safety",
        "session": "3",
        "capacity": 15,
        "room": "720"
    },
    {
        "id": 49,
        "presenter": "Ken Howard, Special Agent in Charge (GBI Gang Task Force) Katie Walker, Assistant Special Agent in Charge & Tonia Willis",
        "title": "Gang Culture and Our Children",
        "description": "\u201cGang affiliation is not something that students leave behind when they enter the school building. If a gang presence exists at school, it cannot be ignored. . . Gang-related issues should be addressed head-on or they will fester, harm school climate, and impede the learning environment\u201d (Georgia Department of Education). Kids are being recruited to join gangs now when they are in high school, middle school, and yes, even elementary school! Learn about active gangs in surrounding areas and how to identify them, as well as how gang involvement impacts kids in school and out of school.",
        "category": "Safety",
        "session": "4",
        "capacity": 15,
        "room": "720"
    },
    {
        "id": 50,
        "presenter": "Kevin Southall, OCES",
        "title": "Suno: More Than a Jingle",
        "description": "Suno shows teachers how to use AI music to boost engagement, spark creativity, and make learning stick across any subject. Educators will create their own classroom-ready songs and leave with fresh, fun ideas they can use for students and themselves immediately.",
        "category": "Technology",
        "session": "4",
        "capacity": 15,
        "room": "612"
    },
    {
        "id": 51,
        "presenter": "Kristine Heckman, OCHS and Robin Guest, OCES",
        "title": "Absent Intelligence",
        "description": "Overwhelmed with all the AI choices out there? Come to this class to learn how to start a chat with ChatGPT. This course is designed to help teachers incorporate AI into their classrooms without being overwhelmed. Basic tips and helpful hints will be the focus, so you can begin or even continue your journey from Absent Intelligence to Amazing Integration.",
        "category": "Technology",
        "session": "1",
        "capacity": 15,
        "room": "722"
    },
    {
        "id": 52,
        "presenter": "Lindsey Gregory, OCES",
        "title": "Escape Room",
        "description": "Transform traditional classroom materials into interactive challenges by incorporating digital locks. This session explores how embedding game-like mechanics into everyday tasks can spark curiosity and increase student engagement. Participants will learn how to create their own digital locks to breathe new life into standard worksheets and create immersive, multi-layered learning adventures.",
        "category": "Instruction",
        "session": "3",
        "capacity": 15,
        "room": "712"
    },
    {
        "id": 53,
        "presenter": "Mara Hardy, OCMS",
        "title": "AI Early Finisher Activities",
        "description": "Discover how to engage your early finishers with meaningful, challenging work using AI-powered extension activities. In this hands-on session, you'll learn to use ChatGPT to create Depth of Knowledge (DOK) leveled tasks that push students beyond surface learning while keeping them motivated through digital badge-earning opportunities. Participants will leave with their own content-specific early finisher activities and a personalized badge system ready to implement in their classrooms. Transform those extra minutes into powerful learning moments that celebrate student achievement!",
        "category": "Technology",
        "session": "3",
        "capacity": 15,
        "room": "726"
    },
    {
        "id": 54,
        "presenter": "Michael Weis, OCHS",
        "title": "Peardeck and Flexiquiz",
        "description": "This session will allow users to become familiar with the PearDeck and Flexiquiz application for Google Presentations for gauging student learning (formative assessments).",
        "category": "Technology",
        "session": "1",
        "capacity": 15,
        "room": "610"
    },
    {
        "id": 55,
        "presenter": "Norma Heninger, County Dir. DFACS",
        "title": "Foster Care and DFACS",
        "description": "Information about the foster care system and how DFACS works to support children and families in our community.",
        "category": "SEL",
        "session": "1",
        "capacity": 15,
        "room": "821"
    },
    {
        "id": 56,
        "presenter": "Norma Heninger, County Dir. DFACS",
        "title": "Foster Care and DFACS",
        "description": "Information about the foster care system and how DFACS works to support children and families in our community.",
        "category": "SEL",
        "session": "2",
        "capacity": 15,
        "room": "821"
    },
    {
        "id": 57,
        "presenter": "Paul Thiel, Director of Operations OCHS",
        "title": "Mastering Classroom Management with LanSchool",
        "description": "Take control of your digital classroom! Discover how LanSchool can transform your ability to monitor student devices, guide online learning, and keep students focused on the task at hand. Learn essential features like screen monitoring, website management, messaging tools, and attention-grabbing techniques that help you maintain engagement during instruction. Whether you're new to LanSchool or looking to unlock its full potential, you'll leave with practical skills to create a more productive and focused learning environment.",
        "category": "Technology",
        "session": "3",
        "capacity": 20,
        "room": "821"
    },
    {
        "id": 58,
        "presenter": "Rebecca Crook, Instructional Coach, OCES",
        "title": "Mystery Skype: Making Geography Engaging",
        "description": "Mystery Skype: Making Geography Engaging: Take your geography standards to the next level with an interactive, inquiry-based learning experience! In this session, you'll learn how Mystery Skype transform map skills and geographic reasoning into an exciting game that connects your students with classrooms around the world. We'll explore how to prepare students for the game, assign the roles, and align the activity to any grad level and any geography standards. Walk away with everything you need to bring high-energy, authentic global learning into your classroom.",
        "category": "Instruction",
        "session": "2",
        "capacity": 20,
        "room": "614"
    },
    {
        "id": 59,
        "presenter": "Rebecca Crook, Instructional Coach, OCES",
        "title": "Using & Choosing Decodable Texts (Wiley Bleins approach)",
        "description": "Using & Choosing Decodable Texts (Wiley Blevins Approach): Strong decoding is the foundation of reading success, and decodable texts are a powerful tool when used well. Designed for K-2 teachers and any educators supporting students with phonics gaps, this session breaks down how to select, introduce, and use decodable texts effectively using Wiley Blevins book. We'll look at the key criteria for high-quality decodables, and simple routines that build accuracy, automaticity, and confidence in emerging readers. Participants will leave with practical examples, planning tools, and ready-to-use strategies for small-group instruction.",
        "category": "Instruction",
        "session": "3",
        "capacity": 20,
        "room": "614"
    },
    {
        "id": 60,
        "presenter": "Rosanna Ames, PR & Julie Sartor, Media Specialist OCHS",
        "title": "Unlocking the Magic of Canva",
        "description": "Canva is one of the most user-friendly design tools available to educators, and we have free access to the pro version. Canva is constantly improving functionality and adding new features. Join us for this session to check out some of the new features, including AI tools.",
        "category": "Technology",
        "session": "3",
        "capacity": 15,
        "room": "605"
    },
    {
        "id": 61,
        "presenter": "Rosanna Ames, PR & Julie Sartor, Media Specialist OCHS",
        "title": "Unlocking the Magic of Canva",
        "description": "Canva is one of the most user-friendly design tools available to educators, and we have free access to the pro version. Canva is constantly improving functionality and adding new features. Join us for this session to check out some of the new features, including AI tools.",
        "category": "Technology",
        "session": "4",
        "capacity": 15,
        "room": "605"
    },
    {
        "id": 62,
        "presenter": "Rosanna Ames, PR Consultant, Julie Sartor & Maurice Freeman, OCHS",
        "title": "Communication Strategies",
        "description": "",
        "category": "Technology",
        "session": "1",
        "capacity": 15,
        "room": "605"
    },
    {
        "id": 63,
        "presenter": "Rosanna Ames, PR Consultant, Julie Sartor & Maurice Freeman, OCHS",
        "title": "Communication Strategies",
        "description": "",
        "category": "Technology",
        "session": "2",
        "capacity": 15,
        "room": "605"
    },
    {
        "id": 64,
        "presenter": "Samantha Mathe, OCES",
        "title": "Be Aware, Stay Safe: Practical Strategies for Everyday Life",
        "description": "From online threats to real-world encounters, this session equips you with practical knowledge to protect yourself in today's world. Learn what you may not know about internet safety, how to recognize and avoid common scams (whether they come through phone calls or emails), and what to watch for when you're out and about on your own. The session wraps up with physical tactics you can use if you ever find yourself in a dangerous situation. Walk away with actionable strategies you can put into practice immediately.",
        "category": "Safety",
        "session": "1",
        "capacity": 15,
        "room": "712"
    },
    {
        "id": 65,
        "presenter": "Sarah Gray and Ela McAllister, OCES",
        "title": "Using AI to create stories with differentiated Lexile Levels",
        "description": "Imagine being able to create perfectly leveled stories in minutes. In this session, participants will learn how to use AI tools to generate engaging texts at specific Lexile levels and design meaningful questions that support comprehension. You\u2019ll leave with practical techniques to personalize literacy experiences for every learner.",
        "category": "Technology",
        "session": "4",
        "capacity": 15,
        "room": "726"
    },
    {
        "id": 66,
        "presenter": "Shannon Hammond, Executive Director of Adult Literacy Barrow",
        "title": "Strategies for Supporting English Learners in the Classroom",
        "description": "Participants will leave with an understanding of the needs of English Learners and will be provided with strategies to meet their unique needs. The session is open to all educators who teach or otherwise support English Learners.",
        "category": "Instruction",
        "session": "2",
        "capacity": 20,
        "room": "701"
    },
    {
        "id": 67,
        "presenter": "Shannon Hammond, Executive Director of Adult Literacy Barrow",
        "title": "Strategies for Supporting English Learners in the Classroom",
        "description": "Participants will leave with an understanding of the needs of English Learners and will be provided with strategies to meet their unique needs. The session is open to all educators who teach or otherwise support English Learners.",
        "category": "Instruction",
        "session": "3",
        "capacity": 20,
        "room": "701"
    },
    {
        "id": 68,
        "presenter": "Shannon Hammond, Executive Director of Adult Literacy Barrow",
        "title": "Strategies for Supporting English Learners in the Classroom",
        "description": "Participants will leave with an understanding of the needs of English Learners and will be provided with strategies to meet their unique needs. The session is open to all educators who teach or otherwise support English Learners.",
        "category": "Instruction",
        "session": "4",
        "capacity": 20,
        "room": "701"
    },
    {
        "id": 69,
        "presenter": "Shona Foster, Instructional Technology & Digital Learning Director, NEGA RESA",
        "title": "Using NotebookLM to Support Teaching, Learning, and Planning",
        "description": "NotebookLM is a powerful AI tool designed to help educators make sense of information using their own trusted sources. In this session, participants will explore how Notebook LM can support lesson planning, Instruction analysis, and instructional decision making by synthesizing documents, generating insights, creating summaries, and supporting multimodal learning experiences. Attendees will see practical classroom and professional use cases, including note-taking, question generation, concept mapping, and podcast creation, while gaining a clear understanding of how NotebookLM aligns with instructional goals and standards based teaching. This hands-on session is ideal for educators looking to use AI thoughtfully, safely, and efficiently to support both teaching and learning",
        "category": "Technology",
        "session": "1",
        "capacity": 20,
        "room": "621"
    },
    {
        "id": 70,
        "presenter": "Shona Foster, Instructional Technology & Digital Learning Director, NEGA RESA",
        "title": "Using AI Tools to Support Life, Work, and Well-Being",
        "description": "NotebookLM is a powerful AI tool designed to help educators make sense of information using their own trusted sources. In this session, participants will explore how Notebook LM can support lesson planning, Instruction analysis, and instructional decision making by synthesizing documents, generating insights, creating summaries, and supporting multimodal learning experiences. Attendees will see practical classroom and professional use cases, including note-taking, question generation, concept mapping, and podcast creation, while gaining a clear understanding of how NotebookLM aligns with instructional goals and standards based teaching. This hands-on session is ideal for educators looking to use AI thoughtfully, safely, and efficiently to support both teaching and learning",
        "category": "Technology",
        "session": "2",
        "capacity": 20,
        "room": "621"
    },
    {
        "id": 71,
        "presenter": "Shona Foster, Instructional Technology & Digital Learning Director, NEGA RESA",
        "title": "Using NotebookLM to Support Teaching, Learning, and Planning",
        "description": "NotebookLM is a powerful AI tool designed to help educators make sense of information using their own trusted sources. In this session, participants will explore how Notebook LM can support lesson planning, Instruction analysis, and instructional decision making by synthesizing documents, generating insights, creating summaries, and supporting multimodal learning experiences. Attendees will see practical classroom and professional use cases, including note-taking, question generation, concept mapping, and podcast creation, while gaining a clear understanding of how NotebookLM aligns with instructional goals and standards based teaching. This hands-on session is ideal for educators looking to use AI thoughtfully, safely, and efficiently to support both teaching and learning",
        "category": "Technology",
        "session": "3",
        "capacity": 20,
        "room": "621"
    },
    {
        "id": 72,
        "presenter": "Shona Foster, Instructional Technology & Digital Learning Director, NEGA RESA",
        "title": "Using AI Tools to Support Life, Work, and Well-Being",
        "description": "NotebookLM is a powerful AI tool designed to help educators make sense of information using their own trusted sources. In this session, participants will explore how Notebook LM can support lesson planning, Instruction analysis, and instructional decision making by synthesizing documents, generating insights, creating summaries, and supporting multimodal learning experiences. Attendees will see practical classroom and professional use cases, including note-taking, question generation, concept mapping, and podcast creation, while gaining a clear understanding of how NotebookLM aligns with instructional goals and standards based teaching. This hands-on session is ideal for educators looking to use AI thoughtfully, safely, and efficiently to support both teaching and learning",
        "category": "Technology",
        "session": "4",
        "capacity": 20,
        "room": "621"
    },
    {
        "id": 73,
        "presenter": "Spencer & Whitney Gomez, Movement Meals",
        "title": "Healthy Meal Prep",
        "description": "Tips and tricks to preparing healthy meals ahead of time.  Demonstration Session",
        "category": "Wellness",
        "session": "1",
        "capacity": 15,
        "room": "116"
    },
    {
        "id": 74,
        "presenter": "Steven King, OCMS",
        "title": "Employing AI Tools in the Science Classroom",
        "description": "Students often use AI to make it easy to complete their assignments, so why shouldn\u2019t you make your job easier by using AI?  We will look at some great uses of implementing AI to make your science lessons engaging and assist with lesson planning, classroom management, and instruction.  Attendees will also be given the opportunity to share uses of AI that they have found beneficial in their own classroom.",
        "category": "Technology",
        "session": "3",
        "capacity": 15,
        "room": "805"
    },
    {
        "id": 75,
        "presenter": "Suzanne Hughes, ESOL Teacher, OCES",
        "title": "\"Wordless Stories\" for English Learners",
        "description": "Wordless Stories for English Learners- In this session I will demonstrate how I use wordless stories to help English Learners of various levels of English Language Proficiency to create/retell narrative stories.  Students watch a wordless video, then they practice sequencing still images from the story.  Vocabulary and language are taught and developed through modeling and peer interaction.  Mini-lessons are used throughout the unit to teach and review concepts such as beginning/middle/end and transition words/phrases.  Students work through the writing process with varying levels of support (pre-write, draft, edit, and publish).",
        "category": "Instruction",
        "session": "1",
        "capacity": 15,
        "room": "805"
    },
    {
        "id": 76,
        "presenter": "Tamara Byars, Director of Professional Learning, Northeast Georgia RESA",
        "title": "Navigating Crucial Conversations with Confidence",
        "description": "Set sail on a learning voyage designed to help educators navigate high-stakes conversations with clarity, confidence, and care. Learn to recognize when a conversation has entered \"rough waters,\" stay oriented to shared purpose while managing strong emotions, and navigate differing viewpoints with respect and professionalism. Whether you're addressing student concerns with parents, collaborating with colleagues, or managing personal conversations at home, you'll gain practical communication tools to steer conversations toward understanding and positive outcomes.",
        "category": "SEL",
        "session": "2",
        "capacity": 15,
        "room": "722"
    },
    {
        "id": 77,
        "presenter": "Tamara Byars, Director of Professional Learning, Northeast Georgia RESA",
        "title": "Navigating Crucial Conversations with Confidence",
        "description": "Set sail on a learning voyage designed to help educators navigate high-stakes conversations with clarity, confidence, and care. Learn to recognize when a conversation has entered \"rough waters,\" stay oriented to shared purpose while managing strong emotions, and navigate differing viewpoints with respect and professionalism. Whether you're addressing student concerns with parents, collaborating with colleagues, or managing personal conversations at home, you'll gain practical communication tools to steer conversations toward understanding and positive outcomes.",
        "category": "SEL",
        "session": "3",
        "capacity": 15,
        "room": "722"
    },
    {
        "id": 78,
        "presenter": "Tamara Byars, Director of Professional Learning, Northeast Georgia RESA",
        "title": "Navigating Crucial Conversations with Confidence",
        "description": "Set sail on a learning voyage designed to help educators navigate high-stakes conversations with clarity, confidence, and care. Learn to recognize when a conversation has entered \"rough waters,\" stay oriented to shared purpose while managing strong emotions, and navigate differing viewpoints with respect and professionalism. Whether you're addressing student concerns with parents, collaborating with colleagues, or managing personal conversations at home, you'll gain practical communication tools to steer conversations toward understanding and positive outcomes.",
        "category": "SEL",
        "session": "4",
        "capacity": 15,
        "room": "722"
    },
    {
        "id": 79,
        "presenter": "Tannis Hillis, Speech Language Therapist, OCES",
        "title": "Writing IEPs using AI",
        "description": "Participants will leave my session knowing how to use AI to help them write IEPs",
        "category": "Technology",
        "session": "2",
        "capacity": 15,
        "room": "116"
    },
    {
        "id": 80,
        "presenter": "Theresa Maxwell, OCHS",
        "title": "Student Survival for the Progressive Teacher",
        "description": "Effective and consistent classroom management skills are essential for every teacher in order to maintain a quality learning environment for all students. This workshop will equip teachers with the necessary tools in order to establish classroom guidelines, procedures, and behavior management techniques.Effective and consistent classroom management skills are essential for every teacher in order to maintain a quality learning environment for all students. This workshop will equip teachers with the necessary tools in order to establish classroom guidelines, procedures, and behavior management techniques.",
        "category": "SEL",
        "session": "3",
        "capacity": 22,
        "room": "116"
    },
    {
        "id": 81,
        "presenter": "Theresa Maxwell, OCHS",
        "title": "Student Survival for the Progressive Teacher",
        "description": "Effective and consistent classroom management skills are essential for every teacher in order to maintain a quality learning environment for all students. This workshop will equip teachers with the necessary tools in order to establish classroom guidelines, procedures, and behavior management techniques.Effective and consistent classroom management skills are essential for every teacher in order to maintain a quality learning environment for all students. This workshop will equip teachers with the necessary tools in order to establish classroom guidelines, procedures, and behavior management techniques.",
        "category": "SEL",
        "session": "4",
        "capacity": 22,
        "room": "116"
    },
    {
        "id": 82,
        "presenter": "Tommy Wilson and Ruth Wilson, OCES",
        "title": "Strategies for Self Defense",
        "description": "Participants will learn techniques for survival in an uncertain world.   They will learn to identify potential threats and countermeasures to defend against those threats. They will learn how situational awareness and self-awareness can act as proactive measures.",
        "category": "Safety",
        "session": "2",
        "capacity": 20,
        "room": "115/art"
    }
];;

        // Session time slots
        const SESSION_TIMES = {
            '1': '8:15 - 9:05',
            '2': '9:20 - 10:10',
            '3': '10:35 - 11:25',
            '4': '11:40 - 12:30'
        };

        // User's registration state
        let userRegistrations = {
            1: null,
            2: null,
            3: null,
            4: null
        };

        // Track enrollment counts per session (by session id)
        let sessionEnrollments = {};

        // Track favorited sessions
        let favoriteSessions = new Set();

        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            // Hide setup banner if Airtable is configured
            if (!AIRTABLE_CONFIG.apiKey.includes('YOUR_') && !AIRTABLE_CONFIG.baseId.includes('YOUR_')) {
                const banner = document.getElementById('setupBanner');
                if (banner) banner.style.display = 'none';
            }
            
            loadFavorites();
            await loadEnrollmentCounts();
            populatePresenterFilter();
            setupFilters();
            setupUserFormSave();
            loadUserInfo();
            
            // Check if user has existing registration and load their sessions
            await checkExistingRegistration();
            
            loadSessions();
            updateFavoritesCount();
            updateMobileSchedule();
        });

        // Check if user has existing Airtable registration
        async function checkExistingRegistration() {
            const saved = localStorage.getItem('voyageUserInfo');
            if (!saved) return;
            
            const info = JSON.parse(saved);
            if (!info.email) return;
            
            // Skip if Airtable not configured
            if (AIRTABLE_CONFIG.apiKey.includes('YOUR_') || AIRTABLE_CONFIG.baseId.includes('YOUR_')) return;

            try {
                // Sort by RegisteredAt descending to get the most recent record
                const response = await fetch(
                    `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}?filterByFormula=${encodeURIComponent(`{Email}="${info.email}"`)}&sort%5B0%5D%5Bfield%5D=RegisteredAt&sort%5B0%5D%5Bdirection%5D=desc`,
                    {
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`
                        }
                    }
                );
                
                const data = await response.json();
                
                if (data.records && data.records.length > 0) {
                    // Use the most recent record (first after sorting desc by RegisteredAt)
                    const record = data.records[0];
                    const fields = record.fields;
                    
                    // Save record ID
                    info.airtableRecordId = record.id;
                    localStorage.setItem('voyageUserInfo', JSON.stringify(info));
                    
                    // FIRST: Clear all session selections to start fresh
                    userRegistrations = { 1: null, 2: null, 3: null, 4: null };
                    
                    // THEN: Load existing session selections (only the ones they have)
                    if (fields.Session1) {
                        const session = SESSIONS.find(s => s.title === fields.Session1 && s.session === '1');
                        if (session) userRegistrations[1] = session.id;
                    }
                    if (fields.Session2) {
                        const session = SESSIONS.find(s => s.title === fields.Session2 && s.session === '2');
                        if (session) userRegistrations[2] = session.id;
                    }
                    if (fields.Session3) {
                        const session = SESSIONS.find(s => s.title === fields.Session3 && s.session === '3');
                        if (session) userRegistrations[3] = session.id;
                    }
                    if (fields.Session4) {
                        const session = SESSIONS.find(s => s.title === fields.Session4 && s.session === '4');
                        if (session) userRegistrations[4] = session.id;
                    }
                    
                    // Update button to show registered state
                    updateRegistrationButton(true);
                    updateMySchedule();
                }
            } catch (error) {
                console.error('Error checking existing registration:', error);
            }
        }

        // Load favorites from localStorage
        function loadFavorites() {
            const saved = localStorage.getItem('voyageFavorites');
            if (saved) {
                favoriteSessions = new Set(JSON.parse(saved));
            }
        }

        // Save favorites to localStorage
        function saveFavorites() {
            localStorage.setItem('voyageFavorites', JSON.stringify([...favoriteSessions]));
        }

        // Toggle favorite status
        function toggleFavorite(sessionId, event) {
            event.stopPropagation();
            if (favoriteSessions.has(sessionId)) {
                favoriteSessions.delete(sessionId);
            } else {
                favoriteSessions.add(sessionId);
            }
            saveFavorites();
            updateFavoritesCount();
            loadSessions();
        }

        // Update favorites count display
        function updateFavoritesCount() {
            const countEl = document.getElementById('favoritesCount');
            const count = favoriteSessions.size;
            countEl.textContent = count > 0 ? `(${count} favorited)` : '';
        }

        // Populate presenter filter dropdown
        function populatePresenterFilter() {
            const select = document.getElementById('presenterFilter');
            
            // Get unique presenters and sort alphabetically
            const presenters = [...new Set(SESSIONS.map(s => s.presenter))].sort((a, b) => {
                // Sort by last name (first word after last comma, or first word)
                const getLastName = (name) => {
                    const parts = name.split(',')[0].trim().split(' ');
                    return parts[parts.length - 1].toLowerCase();
                };
                return getLastName(a).localeCompare(getLastName(b));
            });

            presenters.forEach(presenter => {
                const option = document.createElement('option');
                option.value = presenter;
                // Shorten long presenter names for the dropdown
                option.textContent = presenter.length > 40 ? presenter.substring(0, 40) + '...' : presenter;
                select.appendChild(option);
            });
        }

        // Toggle mobile schedule expanded/collapsed
        function toggleMobileSchedule() {
            const bar = document.getElementById('mobileScheduleBar');
            bar.classList.toggle('collapsed');
        }

        // Update mobile schedule bar
        function updateMobileSchedule() {
            const contentEl = document.getElementById('mobileScheduleContent');
            const countEl = document.getElementById('mobileScheduleCount');
            
            const registeredSessions = Object.entries(userRegistrations)
                .filter(([slot, id]) => id !== null)
                .map(([slot, id]) => ({
                    slot,
                    session: SESSIONS.find(s => s.id === id)
                }))
                .sort((a, b) => a.slot - b.slot);

            countEl.textContent = `${registeredSessions.length}/4`;

            if (registeredSessions.length === 0) {
                contentEl.innerHTML = '<div class="mobile-schedule-empty">No sessions selected yet.<br>Browse and register below!</div>';
                return;
            }

            contentEl.innerHTML = registeredSessions.map(({ slot, session }) => `
                <div class="mobile-schedule-item">
                    <div class="mobile-schedule-slot">Session ${slot}: ${SESSION_TIMES[slot]}</div>
                    <div class="mobile-schedule-title">${session.title}</div>
                </div>
            `).join('');
        }

        // Load enrollment counts from Airtable
        async function loadEnrollmentCounts() {
            // Initialize all sessions with 0 enrollments
            SESSIONS.forEach(s => {
                sessionEnrollments[s.id] = 0;
            });

            // Check if Airtable is configured
            if (AIRTABLE_CONFIG.apiKey.includes('YOUR_') || AIRTABLE_CONFIG.baseId.includes('YOUR_')) {
                console.log('Airtable not configured - using local counts only');
                return;
            }

            try {
                // Fetch all registrations from Airtable
                const response = await fetch(
                    `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}`,
                    {
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`
                        }
                    }
                );

                if (response.ok) {
                    const data = await response.json();
                    
                    // Count registrations for each session
                    data.records.forEach(record => {
                        const fields = record.fields;
                        
                        // Check each session slot
                        ['Session1', 'Session2', 'Session3', 'Session4'].forEach(slotField => {
                            const sessionTitle = fields[slotField];
                            if (sessionTitle) {
                                // Find session by title and increment count
                                const session = SESSIONS.find(s => s.title === sessionTitle);
                                if (session) {
                                    sessionEnrollments[session.id] = (sessionEnrollments[session.id] || 0) + 1;
                                }
                            }
                        });
                    });
                    
                    console.log('Enrollment counts loaded:', sessionEnrollments);
                }
            } catch (error) {
                console.error('Error loading enrollment counts:', error);
            }
        }

        // Load user info from localStorage
        function loadUserInfo() {
            const saved = localStorage.getItem('voyageUserInfo');
            if (saved) {
                const info = JSON.parse(saved);
                document.getElementById('userName').value = info.name || '';
                document.getElementById('userEmail').value = info.email || '';
                document.getElementById('userSchool').value = info.school || '';
                
                // Check if already registered (has Airtable record ID)
                if (info.airtableRecordId) {
                    updateRegistrationButton(true);
                }
            }
        }

        // Update the Register for Day button state
        function updateRegistrationButton(isRegistered) {
            const btn = document.getElementById('registerDayBtn');
            const status = document.getElementById('registrationStatus');
            
            if (isRegistered) {
                btn.innerHTML = '‚úì Registered for the Day';
                btn.classList.add('registered');
                btn.disabled = false; // Keep enabled so they can update
                status.style.display = 'block';
                status.className = 'registration-status success';
                status.innerHTML = 'üéâ You\'re registered! Now select your sessions below.';
            }
        }

        // Register for the day (save to Airtable without sessions)
        async function registerForDay() {
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim().toLowerCase();
            const school = document.getElementById('userSchool').value;
            const btn = document.getElementById('registerDayBtn');
            const status = document.getElementById('registrationStatus');

            // Validate
            if (!name) {
                showAlert('Please enter your full name.', 'error');
                document.getElementById('userName').focus();
                return;
            }
            if (!email) {
                showAlert('Please enter your email address.', 'error');
                document.getElementById('userEmail').focus();
                return;
            }
            if (!school) {
                showAlert('Please select your school/department.', 'error');
                document.getElementById('userSchool').focus();
                return;
            }

            // Check if this is a DIFFERENT user than what's stored in localStorage
            const savedInfo = localStorage.getItem('voyageUserInfo');
            if (savedInfo) {
                const oldInfo = JSON.parse(savedInfo);
                if (oldInfo.email && oldInfo.email.toLowerCase() !== email.toLowerCase()) {
                    // Different user! Clear the old user's session selections
                    userRegistrations = { 1: null, 2: null, 3: null, 4: null };
                    console.log('New user detected - cleared previous session selections');
                }
            }

            // Check if Airtable is configured
            if (AIRTABLE_CONFIG.apiKey.includes('YOUR_') || AIRTABLE_CONFIG.baseId.includes('YOUR_')) {
                showAlert('Registration system not configured. Please contact the administrator.', 'error');
                return;
            }

            // Update button state
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Registering...';

            try {
                // Check if user already exists (by email) - sort by RegisteredAt desc to get most recent
                const checkResponse = await fetch(
                    `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}?filterByFormula=${encodeURIComponent(`{Email}="${email}"`)}&sort%5B0%5D%5Bfield%5D=RegisteredAt&sort%5B0%5D%5Bdirection%5D=desc`,
                    {
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`
                        }
                    }
                );
                
                const checkData = await checkResponse.json();
                let recordId;

                if (checkData.records && checkData.records.length > 0) {
                    // User exists - use the most recent record (first after sorting desc)
                    recordId = checkData.records[0].id;
                    
                    const updateResponse = await fetch(
                        `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}/${recordId}`,
                        {
                            method: 'PATCH',
                            headers: {
                                'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                fields: {
                                    Name: name,
                                    School: school
                                }
                            })
                        }
                    );

                    if (!updateResponse.ok) throw new Error('Failed to update registration');
                    
                    // FIRST: Clear all session selections to start fresh
                    userRegistrations = { 1: null, 2: null, 3: null, 4: null };
                    
                    // THEN: Load their existing session selections (only the ones they have)
                    const existingRecord = checkData.records[0].fields;
                    if (existingRecord.Session1) {
                        const session = SESSIONS.find(s => s.title === existingRecord.Session1 && s.session === '1');
                        if (session) userRegistrations[1] = session.id;
                    }
                    if (existingRecord.Session2) {
                        const session = SESSIONS.find(s => s.title === existingRecord.Session2 && s.session === '2');
                        if (session) userRegistrations[2] = session.id;
                    }
                    if (existingRecord.Session3) {
                        const session = SESSIONS.find(s => s.title === existingRecord.Session3 && s.session === '3');
                        if (session) userRegistrations[3] = session.id;
                    }
                    if (existingRecord.Session4) {
                        const session = SESSIONS.find(s => s.title === existingRecord.Session4 && s.session === '4');
                        if (session) userRegistrations[4] = session.id;
                    }

                    status.innerHTML = 'üéâ Welcome back! Your info has been updated. Select your sessions below.';
                } else {
                    // New user - clear any leftover session selections from previous user
                    userRegistrations = { 1: null, 2: null, 3: null, 4: null };
                    
                    // Create new record
                    const createResponse = await fetch(
                        `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}`,
                        {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                records: [{
                                    fields: {
                                        Name: name,
                                        Email: email,
                                        School: school,
                                        RegisteredAt: new Date().toISOString()
                                    }
                                }]
                            })
                        }
                    );

                    if (!createResponse.ok) throw new Error('Failed to create registration');
                    
                    const createData = await createResponse.json();
                    recordId = createData.records[0].id;
                    
                    status.innerHTML = 'üéâ You\'re registered! Now select your sessions below.';
                }

                // Save record ID to localStorage
                const info = {
                    name: name,
                    email: email,
                    school: school,
                    airtableRecordId: recordId
                };
                localStorage.setItem('voyageUserInfo', JSON.stringify(info));

                // Update UI
                btn.innerHTML = '‚úì Registered for the Day';
                btn.classList.add('registered');
                btn.disabled = false;
                status.style.display = 'block';
                status.className = 'registration-status success';
                
                // Reload sessions to show any existing registrations
                loadSessions();
                updateMySchedule();
                updateMobileSchedule();

            } catch (error) {
                console.error('Registration error:', error);
                btn.disabled = false;
                btn.innerHTML = 'üö¢ Register for the Day';
                status.style.display = 'block';
                status.className = 'registration-status error';
                status.innerHTML = '‚ùå Registration failed. Please try again.';
            }
        }

        // Save user info automatically
        function setupUserFormSave() {
            ['userName', 'userEmail', 'userSchool'].forEach(id => {
                document.getElementById(id).addEventListener('change', saveUserInfo);
            });
            
            // Special handling for email field - detect user change
            document.getElementById('userEmail').addEventListener('change', handleEmailChange);
        }

        function handleEmailChange() {
            const newEmail = document.getElementById('userEmail').value.trim().toLowerCase();
            const saved = localStorage.getItem('voyageUserInfo');
            
            if (saved) {
                const oldInfo = JSON.parse(saved);
                const oldEmail = (oldInfo.email || '').toLowerCase();
                
                // If email changed, this is likely a different user
                if (oldEmail && newEmail && oldEmail !== newEmail) {
                    console.log('Email changed - clearing previous user session data');
                    
                    // Clear session selections
                    userRegistrations = { 1: null, 2: null, 3: null, 4: null };
                    
                    // Reset the registration button
                    const btn = document.getElementById('registerDayBtn');
                    const status = document.getElementById('registrationStatus');
                    btn.innerHTML = 'üö¢ Register for the Day';
                    btn.classList.remove('registered');
                    btn.disabled = false;
                    status.style.display = 'none';
                    
                    // Clear the stored record ID
                    const newInfo = {
                        name: document.getElementById('userName').value,
                        email: newEmail,
                        school: document.getElementById('userSchool').value
                    };
                    localStorage.setItem('voyageUserInfo', JSON.stringify(newInfo));
                    
                    // Update displays
                    loadSessions();
                    updateMySchedule();
                    updateMobileSchedule();
                }
            }
        }

        function saveUserInfo() {
            const info = {
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                school: document.getElementById('userSchool').value
            };
            // Preserve the airtableRecordId if it exists
            const saved = localStorage.getItem('voyageUserInfo');
            if (saved) {
                const oldInfo = JSON.parse(saved);
                // Only preserve record ID if email hasn't changed
                if (oldInfo.email && oldInfo.email.toLowerCase() === info.email.toLowerCase() && oldInfo.airtableRecordId) {
                    info.airtableRecordId = oldInfo.airtableRecordId;
                }
            }
            localStorage.setItem('voyageUserInfo', JSON.stringify(info));
        }

        // Load and display sessions
        function loadSessions() {
            const grid = document.getElementById('sessionsGrid');
            grid.innerHTML = '';

            if (SESSIONS.length === 0) {
                grid.innerHTML = '<div class="alert alert-info">No sessions available yet. Please add session data to the SESSIONS array in the code.</div>';
                return;
            }

            SESSIONS.forEach(session => {
                const card = createSessionCard(session);
                grid.appendChild(card);
            });
        }

        // Create session card
        function createSessionCard(session) {
            const card = document.createElement('div');
            card.className = 'session-card';
            card.dataset.session = session.session;
            card.dataset.category = session.category;
            card.dataset.presenter = session.presenter;
            card.dataset.sessionId = session.id;

            const isRegistered = userRegistrations[session.session] === session.id;
            const slotFull = userRegistrations[session.session] !== null && !isRegistered;
            const cardId = `desc-${session.id}`;
            const isFavorited = favoriteSessions.has(session.id);
            
            // Get category class for color coding
            const categoryClass = session.category.toLowerCase().replace(/[^a-z]/g, '').replace('technologyinstruction', 'technology');

            // Check capacity
            const currentEnrollment = sessionEnrollments[session.id] || 0;
            const hasCapacity = session.capacity !== null;
            const capacityReached = hasCapacity && currentEnrollment >= session.capacity;
            const fillingFast = hasCapacity && !capacityReached && (currentEnrollment / session.capacity) >= 0.75;
            
            // Determine button state
            let buttonClass = '';
            let buttonText = 'Register';
            let buttonDisabled = false;
            
            if (isRegistered) {
                buttonClass = 'registered';
                buttonText = '‚úì Registered';
            } else if (capacityReached) {
                buttonClass = 'session-full';
                buttonText = 'üö´ Session Full';
                buttonDisabled = true;
            } else if (slotFull) {
                // Allow clicking to switch sessions - show "Switch" instead of disabled
                buttonClass = 'switch-session';
                buttonText = '‚ÜîÔ∏è Switch to This';
                buttonDisabled = false; // Keep enabled so they can click to switch
            }

            // Build capacity display
            let capacityDisplay = '';
            if (hasCapacity) {
                const spotsLeft = session.capacity - currentEnrollment;
                if (capacityReached) {
                    capacityDisplay = `<span class="info-item capacity-full">üë• ${currentEnrollment}/${session.capacity} (Full)</span>`;
                } else if (spotsLeft <= 5) {
                    capacityDisplay = `<span class="info-item capacity-low">üë• ${currentEnrollment}/${session.capacity} (${spotsLeft} left!)</span>`;
                } else {
                    capacityDisplay = `<span class="info-item">üë• ${currentEnrollment}/${session.capacity} spots</span>`;
                }
            }

            // Filling fast badge
            const fillingFastBadge = fillingFast ? '<div class="filling-fast-badge">üî• Filling Fast!</div>' : '';

            card.innerHTML = `
                ${fillingFastBadge}
                <button class="favorite-btn ${isFavorited ? 'favorited' : ''}" onclick="toggleFavorite(${session.id}, event)" title="${isFavorited ? 'Remove from favorites' : 'Add to favorites'}">
                    ${isFavorited ? '‚≠ê' : '‚òÜ'}
                </button>
                <div class="session-header">
                    <span class="session-slot">Session ${session.session} ‚Ä¢ ${SESSION_TIMES[session.session]}</span>
                </div>
                <span class="category-badge ${categoryClass}">${session.category}</span>
                <h3>${session.title}</h3>
                <p class="presenter">üë§ ${session.presenter}</p>
                <div class="description">
                    <p class="description-text" id="${cardId}">${session.description}</p>
                    ${session.description.length > 150 ? `<button class="read-more-btn" onclick="toggleDescription('${cardId}', this)">Read more ‚ñº</button>` : ''}
                </div>
                <div class="session-info">
                    ${session.room ? `<span class="info-item">üìç ${session.room}</span>` : ''}
                    ${capacityDisplay}
                </div>
                <button 
                    class="register-btn ${buttonClass}" 
                    onclick="toggleRegistration(${session.id}, ${session.session})"
                    ${buttonDisabled ? 'disabled' : ''}
                >
                    ${buttonText}
                </button>
            `;

            return card;
        }

        // Toggle description expand/collapse
        function toggleDescription(id, btn) {
            const desc = document.getElementById(id);
            desc.classList.toggle('expanded');
            if (desc.classList.contains('expanded')) {
                btn.textContent = 'Read less ‚ñ≤';
            } else {
                btn.textContent = 'Read more ‚ñº';
            }
        }

        // Toggle registration
        async function toggleRegistration(sessionId, sessionSlot) {
            // Validate user info
            const name = document.getElementById('userName').value;
            const email = document.getElementById('userEmail').value;
            const school = document.getElementById('userSchool').value;

            if (!name || !email || !school) {
                showAlert('Please fill in your name, email, and school/department first.', 'error');
                if (!name) {
                    document.getElementById('userName').focus();
                } else if (!email) {
                    document.getElementById('userEmail').focus();
                } else {
                    document.getElementById('userSchool').focus();
                }
                return;
            }

            const wasRegistered = userRegistrations[sessionSlot] === sessionId;
            const session = SESSIONS.find(s => s.id === sessionId);
            const currentlyRegisteredId = userRegistrations[sessionSlot];

            if (wasRegistered) {
                // Unregister
                userRegistrations[sessionSlot] = null;
                // Decrease enrollment count
                if (session && sessionEnrollments[sessionId] > 0) {
                    sessionEnrollments[sessionId]--;
                }
                showAlert(`You've been unregistered from "${session.title}"`, 'info');
            } else {
                // Check if already registered for another session in this time slot
                if (currentlyRegisteredId !== null) {
                    const currentSession = SESSIONS.find(s => s.id === currentlyRegisteredId);
                    const confirmSwitch = confirm(
                        `‚ö†Ô∏è Schedule Conflict\n\n` +
                        `You're already registered for:\n"${currentSession.title}"\n\n` +
                        `Do you want to switch to:\n"${session.title}"?\n\n` +
                        `Click OK to switch, or Cancel to keep your current registration.`
                    );
                    
                    if (!confirmSwitch) {
                        return; // User cancelled, keep current registration
                    }
                    
                    // Decrease count for the session being dropped
                    if (sessionEnrollments[currentlyRegisteredId] > 0) {
                        sessionEnrollments[currentlyRegisteredId]--;
                    }
                }

                // Check capacity before registering
                if (session && session.capacity) {
                    const currentEnrollment = sessionEnrollments[sessionId] || 0;
                    if (currentEnrollment >= session.capacity) {
                        showAlert('Sorry, this session is now full. Please choose another session.', 'error');
                        loadSessions(); // Refresh to show updated status
                        return;
                    }
                }
                
                // Register
                userRegistrations[sessionSlot] = sessionId;
                // Increase enrollment count
                if (session) {
                    sessionEnrollments[sessionId] = (sessionEnrollments[sessionId] || 0) + 1;
                }
                showAlert(`Registered for "${session.title}"`, 'success');
            }

            // Save to Airtable
            await saveToAirtable();

            // Update UI
            loadSessions();
            updateMySchedule();
        }

        // Save registration to Airtable
        async function saveToAirtable() {
            // Check if Airtable is configured
            if (AIRTABLE_CONFIG.apiKey.includes('YOUR_') || AIRTABLE_CONFIG.baseId.includes('YOUR_')) {
                console.log('Airtable not configured yet - data saved locally only');
                localStorage.setItem('voyageRegistrations', JSON.stringify(userRegistrations));
                return;
            }

            const userInfo = {
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                school: document.getElementById('userSchool').value
            };

            // Get session titles
            const getSessionTitle = (slot) => {
                const sessionId = userRegistrations[slot];
                if (!sessionId) return '';
                const session = SESSIONS.find(s => s.id === sessionId);
                return session ? session.title : '';
            };

            const fields = {
                Name: userInfo.name,
                Email: userInfo.email,
                School: userInfo.school,
                Session1: getSessionTitle(1),
                Session2: getSessionTitle(2),
                Session3: getSessionTitle(3),
                Session4: getSessionTitle(4)
            };

            try {
                // First, check if user already has a record (get most recent by RegisteredAt)
                const checkResponse = await fetch(
                    `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}?filterByFormula=${encodeURIComponent(`{Email}="${userInfo.email}"`)}&sort%5B0%5D%5Bfield%5D=RegisteredAt&sort%5B0%5D%5Bdirection%5D=desc`,
                    {
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`
                        }
                    }
                );
                
                const checkData = await checkResponse.json();
                let response;

                if (checkData.records && checkData.records.length > 0) {
                    // User exists - UPDATE (PATCH) the most recent record
                    const recordId = checkData.records[0].id;
                    response = await fetch(
                        `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}/${recordId}`,
                        {
                            method: 'PATCH',
                            headers: {
                                'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ fields: fields })
                        }
                    );
                    
                    // Update localStorage with correct record ID
                    const savedInfo = JSON.parse(localStorage.getItem('voyageUserInfo') || '{}');
                    savedInfo.airtableRecordId = recordId;
                    localStorage.setItem('voyageUserInfo', JSON.stringify(savedInfo));
                } else {
                    // New user - CREATE (POST) a new record
                    fields.RegisteredAt = new Date().toISOString();
                    response = await fetch(
                        `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}`,
                        {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${AIRTABLE_CONFIG.apiKey}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ fields: fields })
                        }
                    );
                    
                    if (response.ok) {
                        const createData = await response.json();
                        // Save new record ID to localStorage
                        const savedInfo = JSON.parse(localStorage.getItem('voyageUserInfo') || '{}');
                        savedInfo.airtableRecordId = createData.id;
                        localStorage.setItem('voyageUserInfo', JSON.stringify(savedInfo));
                    }
                }

                if (response.ok) {
                    showAlert('Registration saved successfully!', 'success');
                    // Hide setup banner if it exists
                    const banner = document.getElementById('setupBanner');
                    if (banner) banner.style.display = 'none';
                } else {
                    throw new Error('Failed to save to Airtable');
                }
            } catch (error) {
                console.error('Airtable error:', error);
                showAlert('Note: Registration saved locally. Configure Airtable to sync with database.', 'info');
                localStorage.setItem('voyageRegistrations', JSON.stringify(userRegistrations));
            }
        }

        // Update My Schedule display
        function updateMySchedule() {
            const scheduleDiv = document.getElementById('mySchedule');
            const contentDiv = document.getElementById('scheduleContent');

            const registeredSessions = Object.entries(userRegistrations)
                .filter(([slot, id]) => id !== null)
                .map(([slot, id]) => ({
                    slot,
                    session: SESSIONS.find(s => s.id === id)
                }));

            if (registeredSessions.length === 0) {
                scheduleDiv.style.display = 'none';
                updateMobileSchedule(); // Also update mobile bar
                return;
            }

            scheduleDiv.style.display = 'block';
            contentDiv.innerHTML = registeredSessions.map(({ slot, session }) => `
                <div class="schedule-item">
                    <div class="schedule-slot">Session ${slot}: ${SESSION_TIMES[slot]}</div>
                    <div class="schedule-title">${session.title}</div>
                    <div class="schedule-presenter">${session.presenter}</div>
                    ${session.room ? `<div class="schedule-room">üìç ${session.room}</div>` : ''}
                </div>
            `).join('');
            
            // Also update mobile schedule bar
            updateMobileSchedule();
        }

        // Print Schedule Function
        function printSchedule() {
            const userName = document.getElementById('userName').value || 'Attendee';
            const userSchool = document.getElementById('userSchool').value || '';
            
            const registeredSessions = Object.entries(userRegistrations)
                .filter(([slot, id]) => id !== null)
                .map(([slot, id]) => ({
                    slot,
                    session: SESSIONS.find(s => s.id === id)
                }))
                .sort((a, b) => a.slot - b.slot);

            if (registeredSessions.length === 0) {
                showAlert('Please register for sessions before printing your schedule.', 'error');
                return;
            }

            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>My Voyage to Learning Schedule</title>
                    <style>
                        body { 
                            font-family: Georgia, serif; 
                            padding: 40px; 
                            max-width: 800px; 
                            margin: 0 auto;
                        }
                        .header { 
                            text-align: center; 
                            border-bottom: 3px solid #1e4d7b; 
                            padding-bottom: 20px; 
                            margin-bottom: 30px;
                        }
                        .header h1 { 
                            color: #1e4d7b; 
                            margin: 0; 
                            font-size: 28px;
                        }
                        .header p { 
                            color: #666; 
                            margin: 10px 0 0 0;
                        }
                        .attendee-info {
                            background: #f5f5f5;
                            padding: 15px;
                            border-radius: 8px;
                            margin-bottom: 25px;
                        }
                        .attendee-info strong { color: #1e4d7b; }
                        .session-block {
                            border: 2px solid #1e4d7b;
                            border-radius: 8px;
                            padding: 20px;
                            margin-bottom: 20px;
                        }
                        .session-time {
                            background: #1e4d7b;
                            color: white;
                            padding: 8px 15px;
                            border-radius: 5px;
                            font-weight: bold;
                            display: inline-block;
                            margin-bottom: 10px;
                        }
                        .session-title {
                            font-size: 18px;
                            font-weight: bold;
                            color: #1e4d7b;
                            margin: 10px 0 5px 0;
                        }
                        .session-presenter {
                            color: #666;
                            font-style: italic;
                        }
                        .session-room {
                            color: #333;
                            margin-top: 5px;
                        }
                        .footer {
                            text-align: center;
                            margin-top: 40px;
                            padding-top: 20px;
                            border-top: 1px solid #ddd;
                            color: #999;
                            font-size: 12px;
                        }
                        @media print {
                            body { padding: 20px; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üö¢ Voyage to Learning 4.5</h1>
                        <p>February 20, 2026 ‚Ä¢ Oglethorpe County Schools</p>
                    </div>
                    <div class="attendee-info">
                        <strong>Name:</strong> ${userName}<br>
                        ${userSchool ? `<strong>School/Department:</strong> ${userSchool}` : ''}
                    </div>
                    ${registeredSessions.map(({ slot, session }) => `
                        <div class="session-block">
                            <span class="session-time">Session ${slot}: ${SESSION_TIMES[slot]}</span>
                            <div class="session-title">${session.title}</div>
                            <div class="session-presenter">üë§ ${session.presenter}</div>
                            ${session.room ? `<div class="session-room">üìç ${session.room}</div>` : ''}
                        </div>
                    `).join('')}
                    <div class="footer">
                        Printed from Voyage to Learning 4.5 Registration System
                    </div>
                </body>
                </html>
            `;

            const printWindow = window.open('', '_blank');
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.focus();
            setTimeout(() => {
                printWindow.print();
            }, 250);
        }

        // Setup filters
        function setupFilters() {
            document.getElementById('sessionFilter').addEventListener('change', applyFilters);
            document.getElementById('categoryFilter').addEventListener('change', applyFilters);
            document.getElementById('presenterFilter').addEventListener('change', applyFilters);
            document.getElementById('showFavoritesOnly').addEventListener('change', applyFilters);
            
            // Add search with debounce
            let searchTimeout;
            document.getElementById('searchInput').addEventListener('input', () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(applyFilters, 300);
            });
        }

        function applyFilters() {
            const sessionFilter = document.getElementById('sessionFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const presenterFilter = document.getElementById('presenterFilter').value;
            const showFavoritesOnly = document.getElementById('showFavoritesOnly').checked;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();

            const cards = document.querySelectorAll('.session-card');
            let visibleCount = 0;

            cards.forEach(card => {
                const matchesSession = !sessionFilter || card.dataset.session === sessionFilter;
                const matchesCategory = !categoryFilter || card.dataset.category === categoryFilter;
                const matchesPresenter = !presenterFilter || card.dataset.presenter === presenterFilter;
                
                // Check favorites filter
                const sessionId = parseInt(card.dataset.sessionId);
                const matchesFavorites = !showFavoritesOnly || favoriteSessions.has(sessionId);
                
                // Search in title, presenter, and description
                let matchesSearch = true;
                if (searchTerm) {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const presenter = card.querySelector('.presenter').textContent.toLowerCase();
                    const description = card.querySelector('.description-text').textContent.toLowerCase();
                    matchesSearch = title.includes(searchTerm) || 
                                   presenter.includes(searchTerm) || 
                                   description.includes(searchTerm);
                }

                const isVisible = matchesSession && matchesCategory && matchesPresenter && matchesFavorites && matchesSearch;
                card.style.display = isVisible ? 'flex' : 'none';
                if (isVisible) visibleCount++;
            });

            // Show "no results" message if needed
            const grid = document.getElementById('sessionsGrid');
            const existingNoResults = grid.querySelector('.no-results');
            if (existingNoResults) existingNoResults.remove();

            if (visibleCount === 0) {
                const noResults = document.createElement('div');
                noResults.className = 'no-results';
                noResults.innerHTML = `
                    <p>üîç No sessions found matching your criteria.</p>
                    <p><small>Try adjusting your search or filters.</small></p>
                `;
                grid.appendChild(noResults);
            }
        }

        // Show alert
        function showAlert(message, type) {
            const alertArea = document.getElementById('alertArea');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            alertArea.appendChild(alert);

            setTimeout(() => {
                alert.remove();
            }, 5000);
        }
    </script>
</body>
</html>
